<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <title>Biểu đồ khối lượng hàng hóa luân chuyển năm 2018 </title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

</head>

<body>
    <h1 style="text-align:center;color:#EB1619;">Biểu đồ khối lượng hàng hóa luân chuyển năm 2018</h1>
    <style>
        #chartdiv {
            width: 100%;
            height: 500px;
        }
    </style>

     <!-- Resources -->

    <script src="https://cdn.amcharts.com/lib/4/core.js"></script>
    <script src="https://cdn.amcharts.com/lib/4/charts.js"></script>
    <script src="https://cdn.amcharts.com/lib/4/themes/animated.js"></script>
	
<!-- Chart code -->
    <script>
        $(document).ready(function(){
            // Ajax lấy dữ liệu
           $.ajax({
                type: 'GET',
                url : '../../../json/vantai_buudien/2018/HHLC.json',
                dataType:'json',
                success: function(data) {
                    data_ajax =  eval(data);
                }
            });
            $(document).ajaxComplete(function() {

am4core.ready(function() {

// Themes begin
am4core.useTheme(am4themes_animated);
// Themes end

var chart = am4core.create("chartdiv", am4charts.XYChart);
chart.scrollbarX = new am4core.Scrollbar();

chart.data = data_ajax ;

            // Create axes
            var categoryAxis = chart.xAxes.push(new am4charts.CategoryAxis());
            categoryAxis.dataFields.category = "Ten tinh";
            categoryAxis.renderer.grid.template.location = 0;
            categoryAxis.renderer.minGridDistance = 10;
            categoryAxis.renderer.cellStartLocation = 0.1;
            categoryAxis.renderer.cellEndLocation = 0.9;
            categoryAxis.renderer.labels.template.horizontalCenter = "right";
            categoryAxis.renderer.labels.template.verticalCenter = "middle";
            categoryAxis.renderer.labels.template.rotation = 270;
            categoryAxis.renderer.minHeight = 110;
            categoryAxis.tooltip.disabled = true;


            var valueAxis = chart.yAxes.push(new am4charts.ValueAxis());
            valueAxis.renderer.minGridDistance = 20;
            valueAxis.min = 0;
            valueAxis.cursorTooltipEnabled = false;
            valueAxis.title.text = "Khối lượng (nghìn tấn)";
            valueAxis.title.fontWeight = "bold";


            // Create series
            var series = chart.series.push(new am4charts.ColumnSeries());
            series.dataFields.valueY = "HHLC_Dbo";
            series.dataFields.categoryX = "Ten tinh";
            series.name = "Hàng hóa luân chuyển đường bộ";
	
			var columnTemplate = series.columns.template;
			columnTemplate.tooltipText = "[bold]{valueY}[/]";
			columnTemplate.fillOpacity = .8;
			columnTemplate.strokeWidth = 0;
			columnTemplate.adapter.add("fill", function (fill, target) {
			var dataItem = target.dataItem;
			if (dataItem.valueY > 200) {
				if (dataItem.valueY <500){
				return am4core.color("#FDCC8B");}
					else {
						if (dataItem.valueY <1250){
							return am4core.color("#FD8D59");}
							else {
								if (dataItem.valueY <3125){
								return am4core.color("#E44732");}
									else {
										return am4core.color("#B30000");
									}
							
								}
							}
			}
			else {			
				return am4core.color("#FFF1DA");
			}
			})


            var series2 = chart.series.push(new am4charts.ColumnSeries());
            series2.dataFields.valueY = "HHLC_Dthuy";
            series2.dataFields.categoryX = "Ten tinh";
            series2.name = "Hàng hóa luân chuyển đường thuỷ";
            series2.tooltipText = "[bold]{valueY}[/]";
			var columnTemplate1 = series2.columns.template;
			columnTemplate1.tooltipText = "[bold]{valueY}[/]";
			columnTemplate1.fillOpacity = .8;
			columnTemplate1.strokeWidth = 0;
			columnTemplate1.adapter.add("fill", function (fill, target) {
			var dataItem1 = target.dataItem;
			if (dataItem1.valueY > 10) {
				if (dataItem1.valueY <100){
				return am4core.color("#C8DCF0");}
					else {
						if (dataItem1.valueY <1000){
							return am4core.color("#7AB8DA");}
							else {
								if (dataItem1.valueY <10000){
								return am4core.color("#3686C0");}
									else {
										return am4core.color("#08306B");
									}
							
								}
							}
			}
			else {			
				return am4core.color("#F7FBFF");
			}
			})

			
            // on hover, make corner radiuses bigger

            var lineSeries = chart.series.push(new am4charts.LineSeries())
            lineSeries.dataFields.valueY = "T_HHLC";
            lineSeries.dataFields.categoryX = "Ten tinh";
            lineSeries.name = "Tổng hàng hóa luân chuyển";
            lineSeries.tooltipText = "{valueY.formatNumber('#.0')}[/]";
            lineSeries.bullets.push(new am4charts.CircleBullet());
            lineSeries.strokeWidth = 2;
            lineSeries.stroke = new am4core.InterfaceColorSet().getFor("alternativeBackground");
            lineSeries.strokeOpacity = 0.5;


            // Cursor
            chart.cursor = new am4charts.XYCursor();
            chart.cursor.behavior = "panX";


        }); // end am4core.ready()
	});
});

    </script>

    <!-- HTML -->
    <div id="chartdiv"></div>
</body>

</html>